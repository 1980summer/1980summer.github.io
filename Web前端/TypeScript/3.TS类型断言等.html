<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>类型断言、类型守卫、typeof、instanceof、多态、抽象类、自定义守卫、元组 | Summer的博客</title>
    <meta name="generator" content="VuePress 1.5.4">
    <link rel="icon" href="/img/icon.ico">
    <meta name="description" content="Welcome to my blog, have a nice day!">
    <link rel="preload" href="/assets/css/0.styles.9d8515da.css" as="style"><link rel="preload" href="/assets/js/app.e02eea81.js" as="script"><link rel="preload" href="/assets/js/2.e7d4d83a.js" as="script"><link rel="preload" href="/assets/js/9.ed69bb97.js" as="script"><link rel="prefetch" href="/assets/js/10.87c26a01.js"><link rel="prefetch" href="/assets/js/11.2a37ec72.js"><link rel="prefetch" href="/assets/js/12.fb2103e8.js"><link rel="prefetch" href="/assets/js/13.0411a075.js"><link rel="prefetch" href="/assets/js/14.1bbc7074.js"><link rel="prefetch" href="/assets/js/15.f60e9041.js"><link rel="prefetch" href="/assets/js/16.482c0c35.js"><link rel="prefetch" href="/assets/js/17.6404b7c5.js"><link rel="prefetch" href="/assets/js/18.9812a93a.js"><link rel="prefetch" href="/assets/js/19.4862c9d1.js"><link rel="prefetch" href="/assets/js/20.0fa3bf04.js"><link rel="prefetch" href="/assets/js/21.770384df.js"><link rel="prefetch" href="/assets/js/22.86310055.js"><link rel="prefetch" href="/assets/js/23.99bb4e1f.js"><link rel="prefetch" href="/assets/js/24.59fd610e.js"><link rel="prefetch" href="/assets/js/25.6bf8ef65.js"><link rel="prefetch" href="/assets/js/26.d65520b7.js"><link rel="prefetch" href="/assets/js/3.a165f856.js"><link rel="prefetch" href="/assets/js/4.bfbea725.js"><link rel="prefetch" href="/assets/js/5.14ed0ede.js"><link rel="prefetch" href="/assets/js/6.5286a640.js"><link rel="prefetch" href="/assets/js/7.fefc1cbd.js"><link rel="prefetch" href="/assets/js/8.d55f58f4.js">
    <link rel="stylesheet" href="/assets/css/0.styles.9d8515da.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/icon.ico" alt="Summer的博客" class="logo"> <span class="site-name can-hide">Summer的博客</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="CS" class="dropdown-title"><span class="title">CS</span> <span class="arrow down"></span></button> <button type="button" aria-label="CS" class="mobile-dropdown-title"><span class="title">CS</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/CS/BasicCS/" class="nav-link">
  BasicCS
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Web前端" class="dropdown-title"><span class="title">Web前端</span> <span class="arrow down"></span></button> <button type="button" aria-label="Web前端" class="mobile-dropdown-title"><span class="title">Web前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Web前端/TypeScript/" class="nav-link">
  TypeScript
</a></li><li class="dropdown-item"><!----> <a href="/Web前端/初级前端知识点笔记/" class="nav-link">
  初级前端知识点笔记
</a></li><li class="dropdown-item"><!----> <a href="/Web前端/前端知识体系/" class="nav-link">
  前端知识体系
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="故事" class="dropdown-title"><span class="title">故事</span> <span class="arrow down"></span></button> <button type="button" aria-label="故事" class="mobile-dropdown-title"><span class="title">故事</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/故事/2019成长日记/" class="nav-link">
  2019成长日记
</a></li><li class="dropdown-item"><!----> <a href="/故事/2020年度总结/" class="nav-link">
  2020年度总结
</a></li><li class="dropdown-item"><!----> <a href="/故事/2021年度总结/" class="nav-link">
  2021年度总结
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="CS" class="dropdown-title"><span class="title">CS</span> <span class="arrow down"></span></button> <button type="button" aria-label="CS" class="mobile-dropdown-title"><span class="title">CS</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/CS/BasicCS/" class="nav-link">
  BasicCS
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Web前端" class="dropdown-title"><span class="title">Web前端</span> <span class="arrow down"></span></button> <button type="button" aria-label="Web前端" class="mobile-dropdown-title"><span class="title">Web前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Web前端/TypeScript/" class="nav-link">
  TypeScript
</a></li><li class="dropdown-item"><!----> <a href="/Web前端/初级前端知识点笔记/" class="nav-link">
  初级前端知识点笔记
</a></li><li class="dropdown-item"><!----> <a href="/Web前端/前端知识体系/" class="nav-link">
  前端知识体系
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="故事" class="dropdown-title"><span class="title">故事</span> <span class="arrow down"></span></button> <button type="button" aria-label="故事" class="mobile-dropdown-title"><span class="title">故事</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/故事/2019成长日记/" class="nav-link">
  2019成长日记
</a></li><li class="dropdown-item"><!----> <a href="/故事/2020年度总结/" class="nav-link">
  2020年度总结
</a></li><li class="dropdown-item"><!----> <a href="/故事/2021年度总结/" class="nav-link">
  2021年度总结
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>TypeScript</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Web%E5%89%8D%E7%AB%AF/TypeScript/" aria-current="page" class="sidebar-link">简介</a></li><li><a href="/Web前端/TypeScript/1.TS 入门+基础+技巧性技能.html" class="sidebar-link">1.TS 入门+基础+技巧性技能</a></li><li><a href="/Web前端/TypeScript/2.函数、方法重载.html" class="sidebar-link">2.函数、方法重载</a></li><li><a href="/Web前端/TypeScript/3.TS类型断言等.html" class="active sidebar-link">3.TS类型断言等</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Web前端/TypeScript/3.TS类型断言等.html#类型断言、类型守卫、typeof、instanceof、多态、抽象类、自定义守卫、元组" class="sidebar-link">类型断言、类型守卫、typeof、instanceof、多态、抽象类、自定义守卫、元组</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Web前端/TypeScript/3.TS类型断言等.html#一、【类型断言丶转换】-种类繁多的类型断言和多个重要细节" class="sidebar-link">一、【类型断言丶转换】  种类繁多的类型断言和多个重要细节</a></li><li class="sidebar-sub-header"><a href="/Web前端/TypeScript/3.TS类型断言等.html#二、类型守卫" class="sidebar-link">二、类型守卫</a></li><li class="sidebar-sub-header"><a href="/Web前端/TypeScript/3.TS类型断言等.html#三、typeof-有何局限性-如何解决-【高频面试题】" class="sidebar-link">三、typeof  有何局限性？如何解决？【高频面试题】</a></li><li class="sidebar-sub-header"><a href="/Web前端/TypeScript/3.TS类型断言等.html#四、从原理上深层掌握-instanceof" class="sidebar-link">四、从原理上深层掌握 instanceof</a></li><li class="sidebar-sub-header"><a href="/Web前端/TypeScript/3.TS类型断言等.html#五、类型守卫-结合应用深层掌握-instanceof【真实应用场景】" class="sidebar-link">五、类型守卫 结合应用深层掌握 instanceof【真实应用场景】</a></li><li class="sidebar-sub-header"><a href="/Web前端/TypeScript/3.TS类型断言等.html#六、ts-多态-类型守卫-【-众多语言都有的多态给ts类带来了什么好处-】" class="sidebar-link">六、TS 多态+类型守卫 【 众多语言都有的多态给TS类带来了什么好处？】</a></li><li class="sidebar-sub-header"><a href="/Web前端/TypeScript/3.TS类型断言等.html#七、【ts抽象类】深入理解抽象类【-abstract-class-】" class="sidebar-link">七、【TS抽象类】深入理解抽象类【 abstract class 】</a></li><li class="sidebar-sub-header"><a href="/Web前端/TypeScript/3.TS类型断言等.html#八、-ts-自定义守卫-结合-vue3-源码提升综合运用自定义守卫的能力【vue3源码】" class="sidebar-link">八、 TS 自定义守卫  结合 Vue3 源码提升综合运用自定义守卫的能力【Vue3源码】</a></li><li class="sidebar-sub-header"><a href="/Web前端/TypeScript/3.TS类型断言等.html#十、typescript4-新特性-为什么要用可变元组-元组标签-具体使用" class="sidebar-link">十、TypeScript4 新特性  为什么要用可变元组+元组标签+具体使用</a></li></ul></li></ul></li><li><a href="/Web前端/TypeScript/4.TS泛型.html" class="sidebar-link">4.TS泛型</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="类型断言、类型守卫、typeof、instanceof、多态、抽象类、自定义守卫、元组"><a href="#类型断言、类型守卫、typeof、instanceof、多态、抽象类、自定义守卫、元组" class="header-anchor">#</a> 类型断言、类型守卫、typeof、instanceof、多态、抽象类、自定义守卫、元组</h2> <p>只要一个类的属性和方法是另一个类属性和方法的子集， 或者是完全相同的属性和方法， 就能互相转换。（互相断言）</p> <h3 id="一、【类型断言丶转换】-种类繁多的类型断言和多个重要细节"><a href="#一、【类型断言丶转换】-种类繁多的类型断言和多个重要细节" class="header-anchor">#</a> 一、【类型断言丶转换】  种类繁多的类型断言和多个重要细节</h3> <p>（1）<strong>TS 类型断言定义</strong>: 把两种能有重叠关系的数据类型进行相互转换的一种 TS 语法，把其中的一种数据类型转换成另外一种数据类型。类型断言和类型转换产生的效果一样，但语法格式不同。</p> <p>（2）<strong>TS 类型断言语法格式</strong>: A 数据类型的变量 as B 数据类型 。A 数据类型和 B 数据类型必须具有重叠关系。</p> <p>（3）<strong>重要细节：理解重叠关系</strong>: 以下几种场景都属于重叠关系：</p> <ul><li>1 <strong>A，B如果是类并且有继承关系</strong></li></ul> <p>​	【extends关系】无论 A，B 谁是父类或子类， A 的对象变量可以断言成 B 类型，B 的对象变量可以断言成A类型 。但注意一般在绝大多数场景下都	是把父类的对象变量断言成子类。</p> <ul><li>2 <strong>A，B如果是类，但没有继承关系</strong></li></ul> <p>​	两个类中的任意一个类的所有的 public 实例属性【不包括静态属性】加上所有的 public 实例方法和另一个类的所有 public 实例属性加上所有的 	public 实例方法完全相同或是另外一个类的子集，则这两个类可以相互断言，否则这两个类就不能相互断言。</p> <ul><li>3 <strong>如果A是类，B是接口，并且A类实现了B接口【implements】</strong>，则 A 的对象变量可以断言成 B 接口类型，同样 B 接口类型的对象变量也可以断言成A	类型 。</li> <li>4 <strong>如果A是类，B是接口，并且A类没有实现了B接口</strong>，则断言关系和第2项的规则完全相同。</li> <li>5 <strong>如果A是类，B是 type 定义的数据类型</strong>
【就是引用数据类型，例如 Array, 对象，不能是基本数据类型，例如 string，number,boolean】，并且   有 A 类实现了 B type 定义的数据类型【 implements】，则 A 的对象变量可以断言成 B type 定义的对象数据类型，同样 B type 定义的对象数据类型的对象变量也可以断言成 A 类型</li> <li>6 <strong>如果A是类，B是 type 定义的数据类型，并且A类没有实现B type定义的数据类型</strong>，则断言关系和第2项的规则完全相同。</li> <li>7 <strong>如果A是一个函数上参数变量的联合类型</strong>，例如 string |number，那么在函数内部可以断言成 string 或number 类型。</li> <li>8 <strong>多个类组成的联合类型如何断言？</strong>
例如：let vechile: Car | Bus | Trunck。 vechile 可以断言成其中任意一种数据类  型。 例如 vechile as Car， vechile as Bus ， vechile as Trunck 。</li> <li>9 <strong>任何数据类型都可以转换成 any 或 unknown 类型</strong>，any 或 unknown 类型也可以转换成任何其他数据类型。</li></ul> <p><strong>（4）类型断言存在的意义和应用场景：</strong></p> <p><strong>场景1</strong>：顾客在执行汽车租赁项目租赁价格计算方法中调用每一个类的独有方法时使用</p> <p><strong>场景2</strong>: 对象中的 Symbol 数据类型取值问题</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">let</span> symid <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">&quot;objid&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token punctuation">[</span>symid<span class="token punctuation">]</span><span class="token operator">:</span> <span class="token number">101</span><span class="token punctuation">,</span> username<span class="token operator">:</span> <span class="token string">&quot;wangwu&quot;</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token number">23</span> <span class="token punctuation">}</span>
<span class="token keyword">let</span> username <span class="token operator">=</span> obj<span class="token punctuation">[</span><span class="token string">&quot;username&quot;</span><span class="token punctuation">]</span>
<span class="token comment">//let objid=obj[symid]//类型“symbol”不能作为索引类型使用</span>
<span class="token comment">// 解决:</span>
<span class="token keyword">let</span> objid <span class="token operator">=</span> obj<span class="token punctuation">[</span>symid <span class="token keyword">as</span> <span class="token builtin">any</span><span class="token punctuation">]</span>
<span class="token comment">//let objid2 = obj[symid as unknown]//类型“unknown”不能作为索引类型使用</span>
<span class="token comment">//let symidunknown = symid as unknown// 可以转换成unknown,正确</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><strong>场景3</strong>:  加法计算，巧用 as any。</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span>one<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span><span class="token punctuation">,</span> two<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword">return</span> one <span class="token keyword">as</span> <span class="token builtin">any</span> <span class="token operator">+</span> two <span class="token keyword">as</span> <span class="token builtin">any</span>
<span class="token punctuation">}</span>

<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;3&quot;</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="二、类型守卫"><a href="#二、类型守卫" class="header-anchor">#</a> 二、类型守卫</h3> <p>前置知识：</p> <blockquote><p>new 底层发生了什么？
1.创建一个空的 Object 对象
2.新创建的对象的 <strong>proto</strong> 变量指向 Person 原型对象空间
3.调用构造函数， 把构造函数的 this 绑定为 obj
4.为 obj 对象变量增加 age 属性和 phone 属性</p></blockquote> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span>phone<span class="token punctuation">,</span> age<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 4.为 obj 对象变量增加 age 属性和 phone 属性</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span> <span class="token comment">//age实例属性</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>phone <span class="token operator">=</span> phone<span class="token punctuation">;</span> <span class="token comment">// phone实例属性</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">showone</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">//showone实例方法</span>
<span class="token punctuation">}</span>
Person<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">doEat</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;电话：&quot;</span>，
    <span class="token keyword">this</span><span class="token punctuation">.</span>phone<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> person <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">&quot;12344&quot;</span><span class="token punctuation">,</span> <span class="token number">23</span><span class="token punctuation">)</span>

<span class="token comment">//  new 一个实例对象的底层3步</span>
<span class="token comment">//  1.创建一个 Object 对象</span>
<span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// 相当于 var obj = new Object()</span>


<span class="token comment">//  2.新创建的对象的 __proto__ 变量指向 Person 原型对象空间</span>
obj<span class="token punctuation">.</span>__proto__ <span class="token operator">=</span> Person<span class="token punctuation">.</span>prototype<span class="token punctuation">;</span>
 
<span class="token comment">// 3.调用构造函数， 把构造函数的 this 绑定为 obj</span>
<span class="token function">Person</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&quot;12344&quot;</span><span class="token punctuation">,</span> <span class="token number">23</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><p>为什么要用类型守卫：</p> <p><strong>类型守卫定义：</strong></p> <blockquote><p>在语句的块级作用域【if语句内或条目运算符表达式内】缩小变量的一种类型推断的行为。</p></blockquote> <blockquote><p><strong>类型守卫产生时机</strong>：TS条件语句中遇到下列条件关键字时，会在语句的块级作用域内缩小变量的类型，这种类型推断的行为称作类型守卫 ( Type Guard )。类型守卫可以帮助我们在块级作用域中获得更为需要的精确变量类型，从而减少不必要的类型断言。</p></blockquote> <ul><li><p>类型判断：<code>typeof</code></p></li> <li><p>属性或者方法判断：<code>in</code></p></li> <li><p>实例判断：<code>instanceof</code></p></li> <li><p>字面量相等判断：<code>==</code>, <code>===</code>, <code>!=</code>, <code>!==</code></p></li></ul> <h3 id="三、typeof-有何局限性-如何解决-【高频面试题】"><a href="#三、typeof-有何局限性-如何解决-【高频面试题】" class="header-anchor">#</a> 三、typeof  有何局限性？如何解决？【高频面试题】</h3> <p><strong>typeof 作用</strong></p> <p>typeof 用来检测一个变量或一个对象的数据类型。</p> <p><strong>typeof 检测的范围</strong></p> <blockquote><p>“string&quot; | &quot;number&quot; | &quot;bigint&quot; | &quot;boolean&quot; | &quot;symbol&quot; | &quot;undefined&quot; | &quot;object&quot; | &quot;function&quot; 等数据类型。</p></blockquote> <p><strong>typeof 的局限性</strong></p> <blockquote><p>对于数组、对象来说，其关系错综复杂，使用 typeof 都会统一返回 “object” 字符串</p></blockquote> <p>typeof 检测变量并不完全准确，例如 typeof null 结果为 object，这其实是设计者的一个 bug， 但后来一直没有被改过来，于是就此传下来了，但把 null 当成 object 的理由说成是 未来可能会拥有一个对象空间，这个理由很牵强【我们检测的是对象变量此刻的类型】，null 本来即是数据类型，也是值。所以 typeof null 直接显示 null 最合适了。</p> <p>再例如：使用 typeof 来检测一个数组变量，typeof [ ]  结果显示的是 object,  从 Array 创建的本质上来说确实是 object，但开发者期待看到的是 Array，这更符合预期。 Array 和我们定义的普通函数一样，具有双重性，当成函数类型时用来创建数组对象，但也是一个构造函数对象，拥有静态成员和prototype原型对象属性。</p> <p>再比如：使用 typeof 来检测一个 Set 变量，Map 变量，结果显示的是依然是 object。</p> <p><strong>typeof 的替代方案</strong></p> <p>调用 Object.prototype.toString.call</p> <blockquote><p>注意：调用 Object.prototype.toString.call（obj）方法时， 加上call是要更改this的指向为obj， 如果不更改this指向， 那么this永远都是Object.prototype</p></blockquote> <p>Object.prototype.toString.call ([ ]) 展示[ object Array ]</p> <p>Object.prototype.toString.call(null) 展示[ object null ]</p> <p>Object.prototype.toString.call(Set类型的变量)  展示[ object Set ]</p> <p>Object.prototype.toString.call(Map类型的变量)  展示[ object Map ]</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token string">&quot;jerry&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//[object String]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//[object Number]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//[object Boolean]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">undefined</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//[object Undefined]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//[object Null]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">{</span>name<span class="token operator">:</span> <span class="token string">&quot;jerry&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//[object Object]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//[object Function]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//[object Array]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//[object Date]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token regex">/\d/</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//[object RegExp]</span>

<span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//[object Object]</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p><strong>typeof 的替代方案依然无法解决的问题</strong></p> <p>无法获取一个自定义的类的实例变量或构造函数的对象变量的真正创建类型。解决方案是使用 instanceof 。</p> <h3 id="四、从原理上深层掌握-instanceof"><a href="#四、从原理上深层掌握-instanceof" class="header-anchor">#</a> 四、从原理上深层掌握 instanceof</h3> <p><strong>instanceof 格式</strong>： 对象变量 instanceof  类名或函数名</p> <p><strong>instanceof 的主要作用：</strong> instanceof 帮助我们准确的判断一种自定义函数或类创建的对象变量的数据类型。</p> <p><strong>instanceof 执行后 返回 true 的几种条件【符合一个即可】：</strong></p> <p>（1） 对象变量 <code>__proto__</code> = 类名或函数名.prototype。</p> <p>解释1：如果 instanceof  关键字 左边对象变量的 <strong>proto</strong> 属性指向的原型对象空间=右边类名或函数名的 prototype 对象属性指向的原型对象空间，那么 返回 true。</p> <p>（2）  对象变量<code>__proto__.__proto__...._proto__</code>= 类名或函数名.prototype。</p> <p>解释2： instanceof 左边对象变量 <code>__proto__</code>的1到多个上一级<code>__proto__</code>指向的原型对象空间，等于右边类名或函数名的 prototype 对象属性指向的原型对象空间，那么也返回 true，按照这个查找规律，会一直找到Object.prototype 对象属性指向的原型对象空间为止。</p> <h3 id="五、类型守卫-结合应用深层掌握-instanceof【真实应用场景】"><a href="#五、类型守卫-结合应用深层掌握-instanceof【真实应用场景】" class="header-anchor">#</a> 五、类型守卫 结合应用深层掌握 instanceof【真实应用场景】</h3> <p>顾客租赁多辆不同类型的车后如何计算租赁价格。</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code>
<span class="token comment">// 需求1:汽车租赁功能实现: 有小轿车,大巴,卡车三种类型的车,</span>
<span class="token comment">// 顾客可以租任意一种或多种不同类型的车,按照租用的天计算租金， </span>
<span class="token comment">// 同时为了响应国家对各类车安全的管理, 对在租赁期内有过各种超载，</span>
<span class="token comment">//  超乘客数，酒后驾车等违规的车需额外支付一定的费用。</span>
<span class="token comment">// 需求2:计算退回费用：最终退回顾客的费用为押金扣除使用天数，</span>
<span class="token comment">//  如押金不足需额外支付不足部分。</span>
<span class="token comment">// 思考小轿车,大巴,卡车共同属性:  品牌 ( brand )  vechileNo ( 车牌号 )  days </span>
<span class="token comment">// ( 租赁天数 ) total ( 支付的租赁总费用 )  deposit ( 押金 )</span>
<span class="token comment">// 思考小轿车,大巴,卡车共同方法: 计算租赁车的价格 ( calculateRent)  </span>
<span class="token comment">//  支付押金的方法( payDesposit)</span>
<span class="token comment">// 		安全检测方法（safeShow)</span>

<span class="token keyword">class</span> <span class="token class-name">Vechile</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> count<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
  <span class="token keyword">public</span> brand<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span><span class="token comment">// 品牌</span>
  <span class="token keyword">public</span> vechileNo<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span><span class="token comment">// 车牌号</span>
  <span class="token keyword">public</span> days<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span><span class="token comment">// 租赁天数</span>
  <span class="token keyword">public</span> total<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token comment">// 支付的租赁总费用</span>
  <span class="token keyword">public</span> deposit<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span><span class="token comment">// 押金</span>
  <span class="token keyword">constructor</span><span class="token punctuation">(</span>brand_<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> vechileNo_<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> days_<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> deposit_<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>brand <span class="token operator">=</span> brand_<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>vechileNo <span class="token operator">=</span> vechileNo_<span class="token punctuation">;</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span>days <span class="token operator">=</span> days_<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>deposit <span class="token operator">=</span> deposit_<span class="token punctuation">;</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;constructor Vechile=&gt;this.brand:&quot;</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>brand<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 计算租赁车的价格 ( calculateRent)</span>
  <span class="token keyword">public</span> <span class="token function">calculateRent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;calculateRent来自Vechile=&gt;this.brand:&quot;</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>brand<span class="token punctuation">)</span>

    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>brand <span class="token operator">+</span> <span class="token string">&quot; 车牌号为:&quot;</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>vechileNo <span class="token operator">+</span> <span class="token string">&quot;开始被租&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">//支付押金的方法( payDesposit)</span>
  <span class="token function">payDesposit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>brand <span class="token operator">+</span> <span class="token string">&quot; 车牌号为:&quot;</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>vechileNo <span class="token operator">+</span> <span class="token string">&quot; 支付了:&quot;</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>deposit<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">//  安全检测方法（safeShow)</span>
  <span class="token keyword">public</span> <span class="token function">safeShow</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;车规则....&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>brand <span class="token operator">+</span> <span class="token string">&quot; 车牌号为:&quot;</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>vechileNo <span class="token operator">+</span> <span class="token string">&quot; 违规了:&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

<span class="token punctuation">}</span>

<span class="token comment">// 子类Car类 独有属性为type_ </span>
<span class="token keyword">class</span> <span class="token class-name">Car</span> <span class="token keyword">extends</span> <span class="token class-name">Vechile</span> <span class="token punctuation">{</span>
  <span class="token comment">// public brand: string = &quot;nobrand&quot;</span>
  <span class="token keyword">public</span> <span class="token keyword">type</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span><span class="token comment">//车的型号</span>
  <span class="token keyword">constructor</span><span class="token punctuation">(</span>brand_<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> vechileNo_<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> days_<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span>
    deposit_<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> type_<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//  Vechile.call(this,brand_, vechileNo_, days_, total_, deposit_)</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>brand_<span class="token punctuation">,</span> vechileNo_<span class="token punctuation">,</span> days_<span class="token punctuation">,</span> deposit_<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token keyword">type</span> <span class="token operator">=</span> type_<span class="token punctuation">;</span>

  <span class="token punctuation">}</span>
  <span class="token comment">// 根据车的型号来获取租用一天该型号车的租金</span>
  <span class="token keyword">public</span> <span class="token function">getPriceByType</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> rentMoneyByDay<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token comment">//每天的租金</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token keyword">type</span> <span class="token operator">===</span> <span class="token string">&quot;普拉多巡洋舰&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      rentMoneyByDay <span class="token operator">=</span> <span class="token number">800</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token keyword">type</span> <span class="token operator">===</span> <span class="token string">&quot;凯美瑞旗舰版&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      rentMoneyByDay <span class="token operator">=</span> <span class="token number">400</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token keyword">type</span> <span class="token operator">===</span> <span class="token string">&quot;威驰智行版&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      rentMoneyByDay <span class="token operator">=</span> <span class="token number">200</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> rentMoneyByDay<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token function">calculateRent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//方法重写 [override]</span>
    <span class="token comment">// this.safeShow();// 寄生组合继承模式 middle()</span>
    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">calculateRent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//=Vechile.prototype.calculateRent.call(this)</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Car:&quot;</span><span class="token punctuation">,</span> Car<span class="token punctuation">.</span>count<span class="token punctuation">)</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;this.brand:&quot;</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>brand<span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>total <span class="token operator">+=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>days <span class="token operator">*</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getPriceByType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>total<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">public</span> <span class="token function">checkIsWeigui</span><span class="token punctuation">(</span>isOverWeight<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>isOverWeight<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>total <span class="token operator">+=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>total <span class="token operator">+</span> <span class="token number">500</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Bus</span> <span class="token keyword">extends</span> <span class="token class-name">Vechile</span> <span class="token punctuation">{</span>
  <span class="token keyword">public</span> seatNum<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token comment">// 座位数</span>
  <span class="token keyword">constructor</span><span class="token punctuation">(</span>brand_<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> vechileNo_<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> days_<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span>
    deposit_<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> seatNum_<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//  Vechile.call(this,brand_, vechileNo_, days_, total_, deposit_)</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>brand_<span class="token punctuation">,</span> vechileNo_<span class="token punctuation">,</span> days_<span class="token punctuation">,</span> deposit_<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//使用父类的构造函数的好处</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>seatNum <span class="token operator">=</span> seatNum_<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>seatNum <span class="token operator">&gt;</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&quot;座位数不能超过200&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token function">getPriceBySeatNum</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//计算租赁价格</span>
    <span class="token keyword">let</span> rentMoneyByDay<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token comment">//每天的租金</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>seatNum <span class="token operator">&lt;=</span> <span class="token number">16</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      rentMoneyByDay <span class="token operator">=</span> <span class="token number">800</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>seatNum <span class="token operator">&gt;</span> <span class="token number">16</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      rentMoneyByDay <span class="token operator">=</span> <span class="token number">1600</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> rentMoneyByDay<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">public</span> <span class="token function">calculateRent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">calculateRent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>total <span class="token operator">+=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>days <span class="token operator">*</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getPriceBySeatNum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>total<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token function">checkIsOverNum</span><span class="token punctuation">(</span>isOverWeight<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>isOverWeight<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>total <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>total <span class="token operator">+</span> <span class="token number">2000</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Truck</span> <span class="token keyword">extends</span> <span class="token class-name">Vechile</span> <span class="token punctuation">{</span>
  ton<span class="token operator">!</span><span class="token operator">:</span> <span class="token builtin">number</span> <span class="token comment">// 座位数</span>
  <span class="token keyword">constructor</span><span class="token punctuation">(</span>brand_<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> type_<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
    days_<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> deposit_<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> ton_<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>brand_<span class="token punctuation">,</span> type_<span class="token punctuation">,</span> days_<span class="token punctuation">,</span> deposit_<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>ton <span class="token operator">=</span> ton_<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>ton <span class="token operator">&lt;</span> <span class="token number">300</span> <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">.</span>ton <span class="token operator">&gt;</span> <span class="token number">2000</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&quot;吨数在300-2000吨之间&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token function">checkIsOverWeight</span><span class="token punctuation">(</span>isOverWeight<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>isOverWeight<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;超载了&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>total <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>total <span class="token operator">+</span> <span class="token number">2000</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token function">CalRentPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//计算租赁价格</span>
    <span class="token keyword">let</span> rentMoneyByDay<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token comment">//每天的租金</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>ton <span class="token operator">&lt;=</span> <span class="token number">500</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//500吨</span>
      rentMoneyByDay <span class="token operator">=</span> <span class="token number">750</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>ton <span class="token operator">&gt;</span> <span class="token number">500</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      rentMoneyByDay <span class="token operator">=</span> <span class="token number">1350</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> rentMoneyByDay<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">public</span> <span class="token function">calRent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">CalRentPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token keyword">this</span><span class="token punctuation">.</span>days<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token function">calDesposit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>deposit<span class="token punctuation">;</span>

  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">StringUtil</span> <span class="token punctuation">{</span><span class="token comment">//工具类</span>

  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token function">trimSpace</span><span class="token punctuation">(</span>str<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">string</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> str<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/\s+/g</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">Customer</span> <span class="token punctuation">{</span>

  <span class="token function">rentVechile</span><span class="token punctuation">(</span>vechile<span class="token operator">:</span> Bus <span class="token operator">|</span> Truck <span class="token operator">|</span> Car<span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>vechile <span class="token keyword">instanceof</span> <span class="token class-name">Car</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      vechile<span class="token punctuation">.</span><span class="token function">checkIsWeigui</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>vechile <span class="token keyword">instanceof</span> <span class="token class-name">Bus</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      vechile<span class="token punctuation">.</span><span class="token function">checkIsOverNum</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>vechile <span class="token keyword">instanceof</span> <span class="token class-name">Truck</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      vechile<span class="token punctuation">.</span><span class="token function">checkIsOverWeight</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> vechile<span class="token punctuation">.</span><span class="token function">calculateRent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//&lt;Bus&gt;vechile 效果= vechile as Bus</span>
    <span class="token comment">//vechile as unknown</span>
    <span class="token comment">//vechile.calculateRent()</span>
    <span class="token comment">//(vechile as Bus).checkIsOverNum(true)</span>
  <span class="token punctuation">}</span>

<span class="token punctuation">}</span>

<span class="token keyword">let</span> car <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Car</span><span class="token punctuation">(</span><span class="token string">&quot;普拉多&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;京3A556&quot;</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">100000</span><span class="token punctuation">,</span> <span class="token string">&quot;凯美瑞旗舰版&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> cust <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Customer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;顾客最后的租金是:&quot;</span><span class="token punctuation">,</span> cust<span class="token punctuation">.</span><span class="token function">rentVechile</span><span class="token punctuation">(</span>car<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// if (car instanceof Car) {</span>
<span class="token comment">//   console.log(&quot;car是一个Car类的实例对象变量&quot;);</span>
<span class="token comment">// }</span>
<span class="token comment">// if (car instanceof Vechile) {</span>
<span class="token comment">//   console.log(&quot;car是一个Vechile类的实例对象变量&quot;);</span>
<span class="token comment">// }</span>

<span class="token comment">// if (car instanceof Object) {</span>
<span class="token comment">//   console.log(&quot;car是一个Object类的实例对象变量&quot;);</span>
<span class="token comment">// }</span>
<span class="token comment">// if (car instanceof Bus) {</span>
<span class="token comment">//   console.log(&quot;car是一个Bus类的实例对象变量&quot;);</span>
<span class="token comment">// }</span>
<span class="token comment">//let cust = new Customer();</span>
<span class="token comment">//let total = cust.rentVechile(new Car(&quot;普拉多&quot;, &quot;京3A556&quot;, 3, 100000, &quot;凯美瑞旗舰版&quot;))</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br><span class="line-number">152</span><br><span class="line-number">153</span><br><span class="line-number">154</span><br><span class="line-number">155</span><br><span class="line-number">156</span><br><span class="line-number">157</span><br><span class="line-number">158</span><br><span class="line-number">159</span><br><span class="line-number">160</span><br><span class="line-number">161</span><br><span class="line-number">162</span><br><span class="line-number">163</span><br><span class="line-number">164</span><br><span class="line-number">165</span><br><span class="line-number">166</span><br><span class="line-number">167</span><br><span class="line-number">168</span><br><span class="line-number">169</span><br><span class="line-number">170</span><br><span class="line-number">171</span><br><span class="line-number">172</span><br><span class="line-number">173</span><br><span class="line-number">174</span><br><span class="line-number">175</span><br><span class="line-number">176</span><br><span class="line-number">177</span><br><span class="line-number">178</span><br><span class="line-number">179</span><br><span class="line-number">180</span><br><span class="line-number">181</span><br><span class="line-number">182</span><br><span class="line-number">183</span><br><span class="line-number">184</span><br><span class="line-number">185</span><br><span class="line-number">186</span><br><span class="line-number">187</span><br><span class="line-number">188</span><br><span class="line-number">189</span><br><span class="line-number">190</span><br><span class="line-number">191</span><br><span class="line-number">192</span><br><span class="line-number">193</span><br><span class="line-number">194</span><br><span class="line-number">195</span><br><span class="line-number">196</span><br><span class="line-number">197</span><br><span class="line-number">198</span><br><span class="line-number">199</span><br><span class="line-number">200</span><br><span class="line-number">201</span><br></div></div><h3 id="六、ts-多态-类型守卫-【-众多语言都有的多态给ts类带来了什么好处-】"><a href="#六、ts-多态-类型守卫-【-众多语言都有的多态给ts类带来了什么好处-】" class="header-anchor">#</a> 六、TS 多态+类型守卫 【 众多语言都有的多态给TS类带来了什么好处？】</h3> <p><strong>1.多态的定义:</strong></p> <p>父类的对象变量可以接受任何一个子类的对象</p> <p>从而用这个父类的对象变量来调用子类中重写的方法而输出不同的结果.</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">class</span> <span class="token class-name">Human</span> <span class="token punctuation">{</span>
  <span class="token keyword">public</span> <span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;People父类的eat&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name"><span class="token constant">A</span></span> <span class="token keyword">extends</span> <span class="token class-name">Human</span> <span class="token punctuation">{</span>
  <span class="token keyword">public</span> <span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;用叉子吃饭...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name"><span class="token constant">B</span></span> <span class="token keyword">extends</span> <span class="token class-name">Human</span> <span class="token punctuation">{</span>
  <span class="token keyword">public</span> <span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;用筷子吃饭...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name"><span class="token constant">C</span></span> <span class="token keyword">extends</span> <span class="token class-name">Human</span> <span class="token punctuation">{</span>
  <span class="token keyword">public</span> <span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;用手抓吃饭...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> human<span class="token operator">:</span> Human <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token constant">A</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
human<span class="token punctuation">.</span><span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
human <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token constant">B</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
human<span class="token punctuation">.</span><span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
human <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token constant">C</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
human<span class="token punctuation">.</span><span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// 同时打印出如下内容:</span>
<span class="token comment">// 用叉子吃饭...</span>
<span class="token comment">// 用筷子吃饭...</span>
<span class="token comment">// 用手抓吃饭...</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br></div></div><p><strong>2.产生多态的条件:</strong></p> <p>1.必须存在继承关系 2.必须有方法重写</p> <p><strong>3.多态的好处:</strong></p> <p>利于项目的扩展【从局部满足了 开闭原则--对修改关闭,对扩展开放】</p> <p><strong>4.多态的局限性</strong></p> <p>无法直接调用子类独有方法，必须结合instanceof类型守卫来解决</p> <h3 id="七、【ts抽象类】深入理解抽象类【-abstract-class-】"><a href="#七、【ts抽象类】深入理解抽象类【-abstract-class-】" class="header-anchor">#</a> 七、【TS抽象类】深入理解抽象类【 abstract class 】</h3> <p>2-31</p> <p>一个在任何位置都不能被实例化的类就是一个抽象类【abstract class 】</p> <p>什么样的类可以被定义为抽象类？</p> <p>从宏观上来说，任何一个实例化后毫无意义的类都可以被定义为抽象类。 比如：我们实例化一个玫瑰花类的对象变量，可以得到一个具体的 玫瑰花 实例对象，但如果我们实例化一个  Flower  类的对象变量，那世界上有一个叫 花 的对象吗？很明显没有，所以 Flower 类 可以定义为一个抽象类，但玫瑰花可以定义为具体的类。</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Flower</span> <span class="token punctuation">{</span> <span class="token comment">// 在class前面添加 abstract 关键字即定义为抽象类</span>
  <span class="token comment">// public nmae: string</span>
  <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token function">color</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span> <span class="token comment">// 当发现这个方法没有必要写具体代码的时候,可以定义为抽象方法, 在方法前添加 abstract 关键字</span>
  <span class="token keyword">public</span> <span class="token function">waterNeeded</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Flower needs water'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
   
<span class="token punctuation">}</span> 

<span class="token comment">// let theF = new Flower() // 报错: 无法创建抽象类的实例。</span>
<span class="token keyword">class</span> <span class="token class-name">RedRose</span> <span class="token punctuation">{</span>
  <span class="token keyword">public</span> <span class="token function">color</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Red&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

 <span class="token keyword">class</span> <span class="token class-name">BlueRode</span> <span class="token punctuation">{</span>
  <span class="token keyword">public</span> <span class="token function">color</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Blue&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><p>一个类定义为抽象类的样子：</p> <ul><li><p>可以有 0 到多个抽象方法【只有方法声明，没有方法实现的方法】，</p></li> <li><p>可以有 0 到多个具体方法，</p></li> <li><p>可以有构造器，</p></li> <li><p>可以有 0 到多个实例属性，</p></li> <li><p>可以有 0 到多个静态属性，</p></li> <li><p>可以有 0 到多个静态方法</p> <blockquote><p>单纯从类的定义上来看抽象类和普通类没有区别，只是多了可以有 0 到多个抽象方法这一条，并且不能被实例化。</p></blockquote></li></ul> <p>抽象类的特点</p> <p>可以包含只有方法声明的方法【 和方法签名类似，就是多了 abstract 关键字】，也可以包含实现了具体功能的方法，可以包含构造器，但不能直接实例化一个抽象类，只能通过子类来实例化。</p> <p>抽象类相比普通类充当父类给项目带来的好处</p> <p>好处1：提供统一名称的抽象方法，提高代码的可维护性：抽象类通常用来充当父类，当抽象类把一个方法定义为抽象方法，那么会强制在所有子类中实现它，防止不同子类的同功能的方法命名不相同，从而降低项目维护成本。</p> <p>好处2：防止实例化一个实例化后毫无意义的类。</p> <h3 id="八、-ts-自定义守卫-结合-vue3-源码提升综合运用自定义守卫的能力【vue3源码】"><a href="#八、-ts-自定义守卫-结合-vue3-源码提升综合运用自定义守卫的能力【vue3源码】" class="header-anchor">#</a> 八、 TS 自定义守卫  结合 Vue3 源码提升综合运用自定义守卫的能力【Vue3源码】</h3> <p><strong>自定义守卫格式：</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//==自定义守卫</span>
<span class="token comment">//  1.定义</span>
<span class="token comment">//   1.1 自定义守卫是通过 {形参 is 类型} 返回布尔值的赋予类型守卫的能力的条件表达式</span>
<span class="token comment">//   1.2 形参 is 类型中的类型可以是:</span>
<span class="token comment">//        1.2.1 接口   1.2.2 类     12.3基础类型数据(string,number,boolean,null,</span>
<span class="token comment">// undefined,void,symbol)</span>

<span class="token comment">//  2.Vue3源码中使用自定义守卫的场景:isRef中的自定义守卫</span>
<span class="token comment">//      r is Ref  中r是形参  is是关键字,固定不变  Ref是一种数据类型</span>

<span class="token comment">//  3.自定义守卫理解:</span>
<span class="token comment">//    3.1 如果unref方法中调用的if语句或条件运算符中的isRef(ref)方法返回true </span>
<span class="token comment">//    那么if语句块或条件运算符:号后面的ref就被编译器解析为Ref类型的变量</span>
<span class="token comment">//       </span>
<span class="token comment">//    3.2 r is Ref 会 对r变量进行守卫【把类型的范围缩小 这里的r被缩小为Ref类型] </span>

<span class="token comment">//export interface Ref&lt;T = any&gt; {// 泛型先不用管</span>
<span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">Ref</span> <span class="token punctuation">{</span>
  value<span class="token operator">:</span> any<span class="token punctuation">,</span>
  <span class="token comment">// key为Symbol的属性做类型标识</span>
  <span class="token punctuation">[</span>RefSymbol<span class="token punctuation">]</span><span class="token operator">:</span> <span class="token boolean">true</span>
  _shallow<span class="token operator">?</span><span class="token operator">:</span> boolean
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">isRef</span><span class="token punctuation">(</span><span class="token parameter">r<span class="token operator">:</span> any</span><span class="token punctuation">)</span><span class="token operator">:</span> r is Ref <span class="token punctuation">{</span><span class="token comment">// r is Ref 效果等同于boolean</span>
  <span class="token keyword">return</span> <span class="token function">Boolean</span><span class="token punctuation">(</span>r <span class="token operator">&amp;&amp;</span> r<span class="token punctuation">.</span>__v_isRef <span class="token operator">===</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// 没有用泛型的unref,泛型大家先不用管,接下来几章我们会非常详细的讲解</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">unref</span><span class="token punctuation">(</span><span class="token parameter">ref<span class="token operator">:</span> unknown</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isRef</span><span class="token punctuation">(</span>ref<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> ref<span class="token punctuation">.</span>value
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> ref<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">//return isRef(ref) ? (ref.value as any) : ref</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br></div></div><p>###九、TypeScript4 新特性  小技巧：const 为何也能被修改？如何解决？</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//const arr=[10,30,40,&quot;abc&quot;]</span>
<span class="token comment">//arr=[100,30,40,&quot;abc&quot;]</span>
<span class="token comment">//arr[0]=100</span>

<span class="token comment">// 在数组后面加上 as const 之后就不允许通过索引来修改元素的值了</span>
<span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">,</span> <span class="token string">&quot;abc&quot;</span><span class="token punctuation">]</span> <span class="token keyword">as</span> <span class="token keyword">const</span>
<span class="token comment">//arr = [100, 30, 40, &quot;abc&quot;]</span>
<span class="token comment">//arr[0] = 100;//错误 无法分配到 &quot;数组的索引为0位置的元素&quot; ，因为它是只读属性</span>

<span class="token keyword">function</span> <span class="token function">showArr</span><span class="token punctuation">(</span><span class="token parameter">arr<span class="token operator">:</span> readonly any<span class="token punctuation">[</span><span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//类型“readonly any[]”中的索引签名仅允许读取。</span>
  <span class="token comment">//arr[0] = 100;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token function">showArr</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h3 id="十、typescript4-新特性-为什么要用可变元组-元组标签-具体使用"><a href="#十、typescript4-新特性-为什么要用可变元组-元组标签-具体使用" class="header-anchor">#</a> 十、TypeScript4 新特性  为什么要用可变元组+元组标签+具体使用</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 可变元组 </span>
<span class="token comment">// let [username, age]: [string, number,string,string,string] = [&quot;wangwu&quot;, 23,</span>
<span class="token comment">//   &quot;海口海淀岛四东路3号&quot;, &quot;133123333&quot;, &quot;一路同行,一起飞&quot;]</span>

<span class="token comment">// let [username, age]: [string, number, ...any[]] = [&quot;wangwu&quot;, 23,</span>
<span class="token comment">//   &quot;海口海淀岛四东路3号&quot;, &quot;133123333&quot;, &quot;一路同行,一起飞&quot;,23,&quot;df&quot;]</span>

<span class="token comment">// let [username, age, ...rest]: [string, number, ...any[]] = [&quot;wangwu&quot;, 23,</span>
<span class="token comment">//   &quot;海口海淀岛四东路3号&quot;, &quot;133123333&quot;, &quot;一路同行,一起飞&quot;, 23, &quot;df&quot;]</span>
<span class="token comment">// [ '海口海淀岛四东路3号', '133123333', '一路同行,//一起飞', 23, 'df' ]</span>

<span class="token comment">// 元组标签</span>
<span class="token keyword">let</span> <span class="token punctuation">[</span>username<span class="token punctuation">,</span> age<span class="token punctuation">,</span> <span class="token operator">...</span>rest<span class="token punctuation">]</span><span class="token operator">:</span> <span class="token punctuation">[</span>name_<span class="token operator">:</span> string<span class="token punctuation">,</span> age_<span class="token operator">:</span> number<span class="token punctuation">,</span> <span class="token operator">...</span>rest<span class="token operator">:</span> any<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;wangwu&quot;</span><span class="token punctuation">,</span> <span class="token number">23</span><span class="token punctuation">,</span>
  <span class="token string">&quot;海口海淀岛四东路3号&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;133123333&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;一路同行,一起飞&quot;</span><span class="token punctuation">,</span> <span class="token number">23</span><span class="token punctuation">,</span> <span class="token string">&quot;df&quot;</span><span class="token punctuation">]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;username:&quot;</span><span class="token punctuation">,</span> username<span class="token punctuation">)</span><span class="token comment">//wangwu</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;age:&quot;</span><span class="token punctuation">,</span> age<span class="token punctuation">)</span><span class="token comment">//23</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;rest:&quot;</span><span class="token punctuation">,</span> rest<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>###十一、 TypeScript4 新特性 深入可变元组</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> <span class="token punctuation">[</span>username<span class="token punctuation">,</span> age<span class="token punctuation">,</span> <span class="token operator">...</span>rest<span class="token punctuation">]</span><span class="token operator">:</span> <span class="token punctuation">[</span>name_<span class="token operator">:</span> string<span class="token punctuation">,</span> age_<span class="token operator">:</span> number<span class="token punctuation">,</span><span class="token operator">...</span>rest<span class="token operator">:</span> any<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> descri_<span class="token operator">:</span> string<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;wangwu&quot;</span><span class="token punctuation">,</span> <span class="token number">23</span><span class="token punctuation">,</span><span class="token string">&quot;海口海淀岛四东路3号&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;133123333&quot;</span><span class="token punctuation">,</span> <span class="token number">23</span><span class="token punctuation">,</span> <span class="token string">&quot;weixin&quot;</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">&quot;str&quot;</span><span class="token punctuation">]</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;username:&quot;</span><span class="token punctuation">,</span> username<span class="token punctuation">)</span><span class="token comment">//wangwu</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;age:&quot;</span><span class="token punctuation">,</span> age<span class="token punctuation">)</span><span class="token comment">//23</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;rest:&quot;</span><span class="token punctuation">,</span> rest<span class="token punctuation">)</span>

<span class="token comment">//const arr: (string | number)[] = [10, 30, 40, &quot;abc&quot;, 30] as const</span>
<span class="token comment">// 类型 &quot;readonly [10, 30, 40, &quot;abc&quot;, 30]&quot; 为 &quot;readonly&quot;，不能分配给可变类型 &quot;(string | number)[]&quot;</span>
<span class="token comment">//arr[0]=100</span>

<span class="token keyword">let</span> <span class="token punctuation">[</span>x<span class="token punctuation">,</span> <span class="token operator">...</span>y<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">,</span> <span class="token number">60</span><span class="token punctuation">,</span> <span class="token string">&quot;abc&quot;</span><span class="token punctuation">]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;x:&quot;</span><span class="token punctuation">,</span> x<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;y:&quot;</span><span class="token punctuation">,</span> y<span class="token punctuation">)</span>

<span class="token keyword">let</span> constnum <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">,</span> <span class="token number">60</span><span class="token punctuation">,</span> <span class="token string">&quot;abc&quot;</span><span class="token punctuation">]</span>
<span class="token keyword">let</span> <span class="token punctuation">[</span>x1<span class="token punctuation">,</span> <span class="token operator">...</span>y1<span class="token punctuation">]</span> <span class="token operator">=</span> constnum
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;x1:&quot;</span><span class="token punctuation">,</span> x1<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;y1:&quot;</span><span class="token punctuation">,</span> y1<span class="token punctuation">)</span>

<span class="token comment">// let constnum2 = [10, 30, 40, 60, &quot;abc&quot;]</span>
<span class="token comment">// let [x2, ...y2]: (string | number)[] = constnum2</span>
<span class="token comment">// console.log(&quot;x2:&quot;, x2)</span>
<span class="token comment">// console.log(&quot;y2:&quot;, y2)</span>

<span class="token comment">// let constnum2 = [10, 30, 40, 60, &quot;abc&quot;]</span>
<span class="token comment">// //错误:不能将类型“(string | number)[]”分配给类型“[number, ...any[]]”。</span>
<span class="token comment">// let [x2, ...y2]: [number, ...any[]] = constnum2// 错误</span>
<span class="token comment">// console.log(&quot;x2:&quot;, x2)</span>
<span class="token comment">// console.log(&quot;y2:&quot;, y2)</span>

<span class="token comment">// let constnum2 = [&quot;df&quot;, 30, 40, 60, &quot;abc&quot;]</span>
<span class="token comment">// //  把元组退化成&quot;数组&quot;</span>
<span class="token comment">// let [x2, ...y2]: [...any[]] = constnum2// 错误</span>
<span class="token comment">// console.log(&quot;x2:&quot;, x2)</span>
<span class="token comment">// console.log(&quot;y2:&quot;, y2)</span>

<span class="token comment">// let constnum3 = [10, 30, 40, 60, &quot;abc&quot;] as const</span>
<span class="token comment">// //  把元组退化成&quot;数组&quot;</span>
<span class="token comment">// let [x3, ...y3]: readonly [any, ...any[]] = constnum3// 错误</span>
<span class="token comment">// console.log(&quot;x3:&quot;, x3)</span>
<span class="token comment">// console.log(&quot;y3:&quot;, y3)</span>

<span class="token keyword">let</span> constnum4 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">,</span> <span class="token number">60</span><span class="token punctuation">,</span> <span class="token string">&quot;abc&quot;</span><span class="token punctuation">]</span> <span class="token keyword">as</span> <span class="token keyword">const</span>
<span class="token comment">//  把元组退化成&quot;数组&quot;</span>
<span class="token keyword">let</span> arr<span class="token operator">:</span> readonly <span class="token punctuation">[</span>any<span class="token punctuation">,</span> <span class="token operator">...</span>any<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> constnum4<span class="token comment">// 错误</span>

<span class="token comment">//arr[0] = 100 //readonly 和 as const 都是表示固定不变的，包括数组和元组中每一个元素都不能改变</span>
<span class="token comment">// readonly等效于as const</span>
<span class="token comment">// function tail(constnum5: readonly (string | number)[]) {</span>
<span class="token comment">//   //constnum5[0] = 33</span>
<span class="token comment">//   let arr = constnum5;</span>
<span class="token comment">// }</span>
<span class="token keyword">let</span> constnum5 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">,</span> <span class="token number">60</span><span class="token punctuation">,</span> <span class="token string">&quot;abc&quot;</span><span class="token punctuation">]</span> <span class="token keyword">as</span> <span class="token keyword">const</span>
<span class="token comment">// readonly等效于as const</span>
<span class="token keyword">function</span> <span class="token function">tail</span><span class="token punctuation">(</span><span class="token parameter">arr<span class="token operator">:</span> readonly <span class="token punctuation">[</span>any<span class="token punctuation">,</span> <span class="token operator">...</span>any<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//arr[0] = 33</span>
  <span class="token keyword">let</span> <span class="token punctuation">[</span>first<span class="token punctuation">,</span> <span class="token operator">...</span>rest<span class="token punctuation">]</span> <span class="token operator">=</span> arr<span class="token punctuation">;</span>
  <span class="token keyword">return</span> rest<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">tail</span><span class="token punctuation">(</span>constnum5<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br></div></div><h4 id=""><a href="#" class="header-anchor">#</a></h4></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/Web前端/TypeScript/2.函数、方法重载.html" class="prev">
        2.函数、方法重载
      </a></span> <span class="next"><a href="/Web前端/TypeScript/4.TS泛型.html">
        4.TS泛型
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.e02eea81.js" defer></script><script src="/assets/js/2.e7d4d83a.js" defer></script><script src="/assets/js/9.ed69bb97.js" defer></script>
  </body>
</html>
