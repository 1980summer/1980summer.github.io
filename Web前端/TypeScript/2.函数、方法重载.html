<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>第二章 函数、方法重载 | Summer的博客</title>
    <meta name="generator" content="VuePress 1.5.4">
    <link rel="icon" href="/img/icon.ico">
    <meta name="description" content="Welcome to my blog, have a nice day!">
    <link rel="preload" href="/assets/css/0.styles.9d8515da.css" as="style"><link rel="preload" href="/assets/js/app.e02eea81.js" as="script"><link rel="preload" href="/assets/js/2.e7d4d83a.js" as="script"><link rel="preload" href="/assets/js/8.d55f58f4.js" as="script"><link rel="prefetch" href="/assets/js/10.87c26a01.js"><link rel="prefetch" href="/assets/js/11.2a37ec72.js"><link rel="prefetch" href="/assets/js/12.fb2103e8.js"><link rel="prefetch" href="/assets/js/13.0411a075.js"><link rel="prefetch" href="/assets/js/14.1bbc7074.js"><link rel="prefetch" href="/assets/js/15.f60e9041.js"><link rel="prefetch" href="/assets/js/16.482c0c35.js"><link rel="prefetch" href="/assets/js/17.6404b7c5.js"><link rel="prefetch" href="/assets/js/18.9812a93a.js"><link rel="prefetch" href="/assets/js/19.4862c9d1.js"><link rel="prefetch" href="/assets/js/20.0fa3bf04.js"><link rel="prefetch" href="/assets/js/21.770384df.js"><link rel="prefetch" href="/assets/js/22.86310055.js"><link rel="prefetch" href="/assets/js/23.99bb4e1f.js"><link rel="prefetch" href="/assets/js/24.59fd610e.js"><link rel="prefetch" href="/assets/js/25.6bf8ef65.js"><link rel="prefetch" href="/assets/js/26.d65520b7.js"><link rel="prefetch" href="/assets/js/3.a165f856.js"><link rel="prefetch" href="/assets/js/4.bfbea725.js"><link rel="prefetch" href="/assets/js/5.14ed0ede.js"><link rel="prefetch" href="/assets/js/6.5286a640.js"><link rel="prefetch" href="/assets/js/7.fefc1cbd.js"><link rel="prefetch" href="/assets/js/9.ed69bb97.js">
    <link rel="stylesheet" href="/assets/css/0.styles.9d8515da.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/icon.ico" alt="Summer的博客" class="logo"> <span class="site-name can-hide">Summer的博客</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="CS" class="dropdown-title"><span class="title">CS</span> <span class="arrow down"></span></button> <button type="button" aria-label="CS" class="mobile-dropdown-title"><span class="title">CS</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/CS/BasicCS/" class="nav-link">
  BasicCS
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Web前端" class="dropdown-title"><span class="title">Web前端</span> <span class="arrow down"></span></button> <button type="button" aria-label="Web前端" class="mobile-dropdown-title"><span class="title">Web前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Web前端/TypeScript/" class="nav-link">
  TypeScript
</a></li><li class="dropdown-item"><!----> <a href="/Web前端/初级前端知识点笔记/" class="nav-link">
  初级前端知识点笔记
</a></li><li class="dropdown-item"><!----> <a href="/Web前端/前端知识体系/" class="nav-link">
  前端知识体系
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="故事" class="dropdown-title"><span class="title">故事</span> <span class="arrow down"></span></button> <button type="button" aria-label="故事" class="mobile-dropdown-title"><span class="title">故事</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/故事/2019成长日记/" class="nav-link">
  2019成长日记
</a></li><li class="dropdown-item"><!----> <a href="/故事/2020年度总结/" class="nav-link">
  2020年度总结
</a></li><li class="dropdown-item"><!----> <a href="/故事/2021年度总结/" class="nav-link">
  2021年度总结
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="CS" class="dropdown-title"><span class="title">CS</span> <span class="arrow down"></span></button> <button type="button" aria-label="CS" class="mobile-dropdown-title"><span class="title">CS</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/CS/BasicCS/" class="nav-link">
  BasicCS
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Web前端" class="dropdown-title"><span class="title">Web前端</span> <span class="arrow down"></span></button> <button type="button" aria-label="Web前端" class="mobile-dropdown-title"><span class="title">Web前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Web前端/TypeScript/" class="nav-link">
  TypeScript
</a></li><li class="dropdown-item"><!----> <a href="/Web前端/初级前端知识点笔记/" class="nav-link">
  初级前端知识点笔记
</a></li><li class="dropdown-item"><!----> <a href="/Web前端/前端知识体系/" class="nav-link">
  前端知识体系
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="故事" class="dropdown-title"><span class="title">故事</span> <span class="arrow down"></span></button> <button type="button" aria-label="故事" class="mobile-dropdown-title"><span class="title">故事</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/故事/2019成长日记/" class="nav-link">
  2019成长日记
</a></li><li class="dropdown-item"><!----> <a href="/故事/2020年度总结/" class="nav-link">
  2020年度总结
</a></li><li class="dropdown-item"><!----> <a href="/故事/2021年度总结/" class="nav-link">
  2021年度总结
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>TypeScript</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Web%E5%89%8D%E7%AB%AF/TypeScript/" aria-current="page" class="sidebar-link">简介</a></li><li><a href="/Web前端/TypeScript/1.TS 入门+基础+技巧性技能.html" class="sidebar-link">1.TS 入门+基础+技巧性技能</a></li><li><a href="/Web前端/TypeScript/2.函数、方法重载.html" class="active sidebar-link">2.函数、方法重载</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Web前端/TypeScript/2.函数、方法重载.html#第二章-函数、方法重载" class="sidebar-link">第二章 函数、方法重载</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Web前端/TypeScript/2.函数、方法重载.html#_1-函数重载的重要性和优势" class="sidebar-link">1.函数重载的重要性和优势</a></li><li class="sidebar-sub-header"><a href="/Web前端/TypeScript/2.函数、方法重载.html#_2-完整的函数重载定义" class="sidebar-link">2.完整的函数重载定义</a></li><li class="sidebar-sub-header"><a href="/Web前端/TypeScript/2.函数、方法重载.html#_3-方法重载" class="sidebar-link">3.方法重载</a></li><li class="sidebar-sub-header"><a href="/Web前端/TypeScript/2.函数、方法重载.html#_4-构造器重载" class="sidebar-link">4 构造器重载</a></li></ul></li></ul></li><li><a href="/Web前端/TypeScript/3.TS类型断言等.html" class="sidebar-link">3.TS类型断言等</a></li><li><a href="/Web前端/TypeScript/4.TS泛型.html" class="sidebar-link">4.TS泛型</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="第二章-函数、方法重载"><a href="#第二章-函数、方法重载" class="header-anchor">#</a> 第二章 函数、方法重载</h2> <p>什么是重载？</p> <blockquote><p>两个同名的函数只有一个函数体，这两个函数共用一个函数体，就是函数重载。</p></blockquote> <h3 id="_1-函数重载的重要性和优势"><a href="#_1-函数重载的重要性和优势" class="header-anchor">#</a> 1.函数重载的重要性和优势</h3> <p>使用场景：</p> <ul><li><p>函数重载或方法重载适用于完成项目种某种相同功能但细节又不同的应用场景。</p></li> <li><p>著名前端流行框架底层都用到函数重载，例如：Vue3 底层源码就多处使用到带泛型的函数重载。</p></li></ul> <p>相关概念：</p> <ul><li>函数签名：</li> <li><blockquote><p>函数签名 = 函数名称 + 函数参数 + 函数参数类型 + 返回值类型</p> <ul><li>不包含函数体</li> <li>有两种签名： 重载签名（多个）、实现签名（一个）</li></ul></blockquote></li></ul> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">getMessage</span><span class="token punctuation">(</span>value<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> myname<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> Message<span class="token comment">//第一个根据数字id来查询单个消息的重载签名</span>
<span class="token keyword">function</span> <span class="token function">getMessage</span><span class="token punctuation">(</span>value<span class="token operator">:</span> MessageType<span class="token punctuation">,</span> readRecordCount<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> Message<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token comment">//第二个根据消息类型来查询消息数组的重载签名</span>

<span class="token comment">// 实现签名</span>
<span class="token keyword">function</span> <span class="token function">getMessage</span><span class="token punctuation">(</span>value<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">,</span> value2<span class="token operator">:</span> <span class="token builtin">any</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//console.log(myname)</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> value <span class="token operator">===</span> <span class="token string">&quot;number&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> messages<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token number">6</span> <span class="token operator">===</span> msg<span class="token punctuation">.</span>id <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token comment">//undefined</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token comment">//return messages.filter((msg) =&gt; { return value === msg.type })</span>
    <span class="token keyword">return</span> messages<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> value <span class="token operator">===</span> msg<span class="token punctuation">.</span><span class="token keyword">type</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> value2<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>调用时只能调用重载签名而不能调用实现签名， 因为实现签名只有在定义时有效， 外部调用时是看不到的。</p> <h3 id="_2-完整的函数重载定义"><a href="#_2-完整的函数重载定义" class="header-anchor">#</a> 2.完整的函数重载定义</h3> <p>完整的函数重载定义：包含了以下规则的一组函数就是TS函数重载</p> <p><strong>规则1</strong>由一个实现签名+一个或多个重载签名合成。</p> <p><strong>规则2</strong>外部调用函数重载定义的函数时，只能调用重载签名，不能调用实现签名。这看似矛盾的规则，其实是TS的规定：实现签名下的函数体是给重载签名编写的，实现签名只是在定义时起到了统领所有重载签名的作用，在执行调用时就看不到实现签名了。</p> <p><strong>规则3</strong>调用重载函数时，会根据传递的参数来判断你调用的是哪一个函数</p> <p><strong>规则4:</strong> 只有一个函数体，只有实现签名配备了函数体，所有的重载签名都只有签名，没有配备函数体。</p> <p><strong>规则5:  关于参数类型规则完整总结如下：</strong></p> <p>实现签名参数个数可以少于重载签名的参数个数，但实现签名如果准备包含重载签名的某个位置的参数 ，那实现签名就必须兼容所有重载签名该位置的参数类型【联合类型或 any 或 unknown 类型的一种】。</p> <p><strong>规则6： 关于重载签名和实现签名的返回值类型规则完整总结如下：</strong></p> <p>必须给重载签名提供返回值类型，TS 无法默认推导。</p> <p>提供给重载签名的返回值类型不一定为其执行时的真实返回值类型，可以为重载签名提供真实返回值类型，也可以提供  void 或 unknown 或 any 类型，如果重载签名的返回值类型是 void 或 unknown 或 any 类型，那么将由实现签名来决定重载签名执行时的真实返回值类型。 当然为了调用时能有自动提示+可读性更好+避免可能出现了类型强制转换，强烈建议为重载签名提供真实返回值类型。</p> <p>不管重载签名返回值类型是何种类型，实现签名都可以返回 any 类型 或 unknown类型，当然一般我们两者都不选择，让 TS 默认为实现签名自动推导返回值类型。</p> <h3 id="_3-方法重载"><a href="#_3-方法重载" class="header-anchor">#</a> 3.方法重载</h3> <p>方法：</p> <blockquote><p>方法是一种特定场景下的函数，由对象变量【实例变量】直接调用的函数都是方法。</p></blockquote> <p>比如：</p> <ol><li>函数内部用 this 定义的函数是方法；</li> <li>TS类中定义的函数是方法【TS类中定义的方法就是编译后，JS底层 prototype 的一个函数】；</li> <li>接口内部定义的函数是方法【注意：不是接口函数】；</li> <li>type 内部定义的函数是方法【注意：不是 type 函数】。</li></ol> <p>Java 简易版 ArrayList 类 和其中的方法重载代码实现:</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">//  1.对现有的数组进行封装，让数组增删改变得更加好用</span>
<span class="token comment">//  2.提供get方法 remove方法 显示方法【add方法】</span>
<span class="token comment">// 其中需求中的remove方法有两个，我们用方法重载来实现</span>

<span class="token keyword">class</span> <span class="token class-name">studentList</span> <span class="token punctuation">{</span>
  <span class="token comment">//第一步：定义一个引用属性【数组】</span>
  <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token keyword">public</span> element<span class="token operator">:</span> <span class="token builtin">Array</span><span class="token operator">&lt;</span>object<span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

  <span class="token punctuation">}</span>
  <span class="token comment">// 第二步：根据索引来查询数组中指定元素</span>
  <span class="token keyword">get</span><span class="token punctuation">(</span>index<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>element<span class="token punctuation">[</span>index<span class="token punctuation">]</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// 第三步: 显示方法</span>
  <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>element<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>ele<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>ele<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function">remove</span><span class="token punctuation">(</span>value<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">number</span>
  <span class="token function">remove</span><span class="token punctuation">(</span>value<span class="token operator">:</span> object<span class="token punctuation">)</span><span class="token operator">:</span> object
  <span class="token comment">//remove(value: number | object): number | object {</span>
  <span class="token function">remove</span><span class="token punctuation">(</span>value<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">any</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>element <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>element<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span>ele<span class="token punctuation">,</span> index<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">//如果是根据数字【元素索引】去删除元素，remove方法返回的是一个数字</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> value <span class="token operator">===</span> <span class="token string">&quot;number&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> value <span class="token operator">!==</span> index
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token comment">// 如果是根据对象去删除元素，remove方法返回的是一个对象</span>
        <span class="token keyword">return</span> value <span class="token operator">!==</span> ele
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> value<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

<span class="token punctuation">}</span>

<span class="token keyword">let</span> stuOne <span class="token operator">=</span> <span class="token punctuation">{</span> stuname<span class="token operator">:</span> <span class="token string">&quot;wnagwu&quot;</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token number">23</span> <span class="token punctuation">}</span>
<span class="token keyword">let</span> stuTwo <span class="token operator">=</span> <span class="token punctuation">{</span> stuname<span class="token operator">:</span> <span class="token string">&quot;lisi&quot;</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token number">39</span> <span class="token punctuation">}</span>
<span class="token keyword">let</span> stuThree <span class="token operator">=</span> <span class="token punctuation">{</span> stuname<span class="token operator">:</span> <span class="token string">&quot;liuqi&quot;</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token number">31</span> <span class="token punctuation">}</span>

<span class="token keyword">let</span> studentList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">studentList</span><span class="token punctuation">(</span><span class="token punctuation">[</span>stuOne<span class="token punctuation">,</span> stuTwo<span class="token punctuation">,</span> stuThree<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
studentList<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;删除第一个学生&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// let value = studentList.remove(0)</span>
<span class="token comment">// console.log(&quot;删除的元素为第:&quot;, value, &quot;学生&quot;)</span>
<span class="token comment">// studentList.show();</span>
<span class="token keyword">let</span> value <span class="token operator">=</span> studentList<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>stuTwo<span class="token punctuation">)</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;删除的学生对象为:&quot;</span><span class="token punctuation">,</span> value<span class="token punctuation">)</span>
studentList<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 如果是根据数字【元素索引】去删除元素，remove方法返回的是一个数字</span>
<span class="token comment">// 如果是根据对象去删除元素，remove方法返回的是一个对象</span>
<span class="token comment">//let value=arr.remove(1)</span>


</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br></div></div><h3 id="_4-构造器重载"><a href="#_4-构造器重载" class="header-anchor">#</a> 4 构造器重载</h3> <h4 id="_4-1-构造器-【构造函数】重载"><a href="#_4-1-构造器-【构造函数】重载" class="header-anchor">#</a> 4-1. 构造器 【构造函数】重载</h4> <h5 id="_1-再次强化理解-this"><a href="#_1-再次强化理解-this" class="header-anchor">#</a> （1）<strong>再次强化理解 this</strong></h5> <p>this 其实是一个对象变量，当 new 出来一个对象时，构造器会隐式返回 this  给 new 对象等号左边的对象变量，this 和等号左边的对象变量都指向当前正创建的对象。</p> <p>以后，哪一个对象调用 TS 类的方法，那么这个方法中的 this 都指向当前正使用的对象【 this 和当前的对象变量中都保存着当前对象的首地址】</p> <h5 id="_2-ts构造器有返回值吗"><a href="#_2-ts构造器有返回值吗" class="header-anchor">#</a> （2）<strong>TS构造器有返回值吗？</strong></h5> <p>尽管TS类构造器会隐式返回 this，如果我们非要返回一个值，TS类构造器只允许返回 this，但构造器不需要返回值也能通过编译，更没有返回值类型之说，从这个意义上，TS构造器可以<strong>说成是没有返回值这一说</strong>的构造函数。【<strong>注意：TS构造器和JS构造函数关于返回值的说法不完全相同</strong>】</p> <h5 id="_3-构造器-【构造函数】重载的意义"><a href="#_3-构造器-【构造函数】重载的意义" class="header-anchor">#</a> （3） 构造器 【构造函数】重载的意义</h5> <h5 id="构造器重载和函数重载使基本相同-主要区别是-ts类构造器重载签名和实现签名都不需要管理返回值-ts-构造器是在对象创建出来之后-但是还没有赋值给对象变量之前被执行-一般用来给对象属性赋值。"><a href="#构造器重载和函数重载使基本相同-主要区别是-ts类构造器重载签名和实现签名都不需要管理返回值-ts-构造器是在对象创建出来之后-但是还没有赋值给对象变量之前被执行-一般用来给对象属性赋值。" class="header-anchor">#</a> 构造器重载和函数重载使基本相同，主要区别是：TS类构造器重载签名和实现签名都不需要管理返回值，TS 构造器是在对象创建出来之后，但是还没有赋值给对象变量之前被执行，一般用来给对象属性赋值。</h5> <p>我们知道在TS类中只能定义一个构造器，但实际应用时，TS类在创建对象时经常需要用到有多个构造器的场景，比如：我们计算一个正方形面积，创建正方形对象，可以给构造器传递宽和高，也可以给构造器传递一个包含了宽和高的形状参数对象，这样需要用构造器重载来解决。而面试中也多次出现过关于TS构造器重载的考察，主要考察求职者对重载+构造器的综合运用能力。</p> <h4 id="_4-2-构造器是方法吗"><a href="#_4-2-构造器是方法吗" class="header-anchor">#</a> 4-2. 构造器是方法吗?</h4> <p>我们说对象调用的才是方法，但是TS构造器是在对象空间地址赋值给对象变量之前被调用，而不是用来被对象变量调用的，所以构造器( constructor )可以说成构造函数，但不能被看成是一个方法。</p> <h4 id="_4-3-构造器实现编码【真实应用场景】"><a href="#_4-3-构造器实现编码【真实应用场景】" class="header-anchor">#</a> 4-3. 构造器实现编码【真实应用场景】</h4> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code>
<span class="token comment">/**
 * 定义一个Square类来求面积， 
 * 1、当传入宽和高时求出面积
 * 2、当传入一个包含宽和高的对象时也能求出面积
 */</span>

<span class="token keyword">type</span> <span class="token class-name">type_CharParam</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  width<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span>
  height<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span>
  radius<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span>
  <span class="token comment">// ......</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Square</span> <span class="token punctuation">{</span>
  <span class="token keyword">public</span> width<span class="token operator">:</span> <span class="token builtin">number</span>
  <span class="token keyword">public</span> height<span class="token operator">:</span> <span class="token builtin">number</span>
  
  <span class="token keyword">constructor</span><span class="token punctuation">(</span>width_<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> height_<span class="token operator">:</span><span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token comment">// 重载签名</span>
  <span class="token keyword">constructor</span><span class="token punctuation">(</span>paramObj<span class="token operator">:</span> type_CharParam<span class="token punctuation">)</span> <span class="token comment">// 重载签名</span>
  <span class="token keyword">constructor</span><span class="token punctuation">(</span>paramObjOrWidth_<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">,</span> height_<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span> <span class="token comment">// 实现签名</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> paramObjOrWidth_ <span class="token operator">===</span> <span class="token string">'object'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>width <span class="token operator">=</span> paramObjOrWidth_<span class="token punctuation">.</span>width
      <span class="token keyword">this</span><span class="token punctuation">.</span>height <span class="token operator">=</span> paramObjOrWidth_<span class="token punctuation">.</span>height
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>width <span class="token operator">=</span> paramObjOrWidth_
      <span class="token keyword">this</span><span class="token punctuation">.</span>height <span class="token operator">=</span> height_ 
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> 
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token function">getArea</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">number</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>width <span class="token operator">*</span> <span class="token keyword">this</span><span class="token punctuation">.</span>height
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// let square = new Square(40, 50)</span>
<span class="token comment">// console.log(square.getArea())</span>

<span class="token keyword">let</span> chartParamObj<span class="token operator">:</span> type_CharParam <span class="token operator">=</span> <span class="token punctuation">{</span> width<span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span> height<span class="token operator">:</span> <span class="token number">3</span> <span class="token punctuation">}</span>
<span class="token keyword">let</span> square2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Square</span><span class="token punctuation">(</span>chartParamObj<span class="token punctuation">)</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>square2<span class="token punctuation">.</span><span class="token function">getArea</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br></div></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/Web前端/TypeScript/1.TS 入门+基础+技巧性技能.html" class="prev">
        1.TS 入门+基础+技巧性技能
      </a></span> <span class="next"><a href="/Web前端/TypeScript/3.TS类型断言等.html">
        3.TS类型断言等
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.e02eea81.js" defer></script><script src="/assets/js/2.e7d4d83a.js" defer></script><script src="/assets/js/8.d55f58f4.js" defer></script>
  </body>
</html>
